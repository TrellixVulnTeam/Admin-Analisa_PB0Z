{"remainingRequest":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\src\\components\\CsiDataTable.vue?vue&type=style&index=0&id=3bc25a0a&lang=css","dependencies":[{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\src\\components\\CsiDataTable.vue","mtime":1639640785934},{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50YWJsZSB0ZCwKLnRhYmxlIHRoIHsKICB3aGl0ZS1zcGFjZTogcmV2ZXJ0Owp9CgouZWwtdGFibGUudGFibGUtZGFyayB0aCwKLmVsLXRhYmxlLnRhYmxlLWRhcmsgdHIgewogIGJhY2tncm91bmQtY29sb3I6ICMxNzJiNGQ7Cn0KCi5lbC10YWJsZS50YWJsZS1kYXJrIHRkLAouZWwtdGFibGUudGFibGUtZGFyayB0aC5pcy1sZWFmIHsKICBib3JkZXItYm90dG9tOiBub25lOwp9Cg=="},{"version":3,"sources":["C:\\Users\\sfahr\\Vue_Projects\\admin-sahya-analisa\\src\\components\\CsiDataTable.vue"],"names":[],"mappings":";AA0bA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB","file":"C:/Users/sfahr/Vue_Projects/admin-sahya-analisa/src/components/CsiDataTable.vue","sourceRoot":"","sourcesContent":["<template>\n  <div>\n    <b-card-header class=\"border-0\">\n      <b-row>\n        <b-col cols=\"4\">\n          <slot name=\"table-action\">\n            <!--Disini akan di isikan tombol custom dari user, seperti tombol add, dll.-->\n          </slot>\n        </b-col>\n\n        <!--Form Pencarian Table-->\n        <b-col cols=\"8\" class=\"text-right\">\n          <div class=\"d-inline-flex align-content-center w-100 mr-auto\">\n            <!--<b-form class=\"ml-auto align-self-end\" :class=\"this.enSearch !== true ?'w-50' : 'w-100'\" v-on:submit.prevent=\"(evt)=> handleTableSearch(evt)\">-->\n            <b-form\n              class=\"ml-auto align-self-end\"\n              :class=\"this.enSearch !== true ? 'w-50' : 'w-100'\"\n              v-on:submit.prevent=\"(evt) => handleTableSearch(evt)\"\n            >\n              <!--Input Filter Tanggal-->\n              <b-input-group\n                :class=\"{ 'w-50 float-left': this.enSearch === true }\"\n                v-if=\"this.enDateFilter === true\"\n              >\n                <my-date-picker\n                  v-model=\"dateRange.date_start\"\n                  style=\"width: 40%\"\n                  class=\"text-left ml-auto\"\n                  @change=\"rangeChanged\"\n                ></my-date-picker>\n                <b-input-group-append>\n                  <span\n                    class=\"pl-2 pr-2 text-center font-weight-400 pt-2\"\n                    style=\"background-color: #0000002e\"\n                    >S.D</span\n                  >\n                </b-input-group-append>\n                <my-date-picker\n                  v-model=\"dateRange.date_end\"\n                  style=\"width: 40%\"\n                  class=\"text-left mr-2\"\n                  @change=\"rangeChanged\"\n                ></my-date-picker>\n              </b-input-group>\n\n              <!--Input Filter Pencarian-->\n              <b-input-group\n                prepend=\"Search\"\n                title=\"Masukkan input pencarian\"\n                class=\"w-50 float-right\"\n                v-if=\"this.enSearch === true\"\n              >\n                <!--<b-form-input class=\"w-auto text-left\" name=\"tableFilter\" v-model=\"search\"></b-form-input>-->\n                <b-form-input\n                  class=\"text-left\"\n                  name=\"tableFilter\"\n                  v-model=\"search\"\n                ></b-form-input>\n                <b-input-group-append>\n                  <b-button\n                    class=\"source-sans-pro text-center\"\n                    type=\"submit\"\n                    variant=\"info\"\n                    title=\"proses pencarian\"\n                    style=\"z-index: auto\"\n                  >\n                    <font-awesome-icon icon=\"search\"></font-awesome-icon>\n                  </b-button>\n                </b-input-group-append>\n              </b-input-group>\n            </b-form>\n\n            <!--Tombol Refresh Tabel-->\n            <div\n              class=\"ml-0\"\n              :class=\"{\n                'w-100': this.enSearch !== true && this.enDateFilter !== true,\n              }\"\n            >\n              <button\n                type=\"button\"\n                class=\"btn source-sans-pro btn-primary border-0 ml-2\"\n                style=\"border-radius: 10%\"\n                @click=\"refreshTable\"\n                title=\"Muat ulang tabel\"\n              >\n                <font-awesome-icon icon=\"sync-alt\"></font-awesome-icon>\n              </button>\n            </div>\n          </div>\n        </b-col>\n      </b-row>\n    </b-card-header>\n    <table\n      class=\"table table-bordered table-striped table-hover b-table table-responsive\"\n    >\n      <thead>\n        <tr>\n          <template v-for=\"(column, index) in columns\">\n            <!--untuk [sortable]-->\n            <th\n              :key=\"index\"\n              v-if=\"column.sortable\"\n              aria-sort=\"none\"\n              :style=\"{\n                width: !isNaN(column.width) ? `${column.width}%` : 'auto',\n                'text-align': column.align || 'left',\n              }\"\n              role=\"columnheader\"\n              @click=\"\n                (ev) =>\n                  onSortChange({ column: column, prop: column.key, ev: ev })\n              \"\n            >\n              <b>{{ column.label }}</b>\n            </th>\n            <!--untuk tanpa [sortable]-->\n            <th\n              :key=\"index\"\n              v-else\n              :style=\"{\n                width: !isNaN(column.width) ? `${column.width}%` : 'auto',\n                'text-align': column.align || 'left',\n              }\"\n              role=\"columnheader\"\n            >\n              <b>{{ column.label }}</b>\n            </th>\n          </template>\n        </tr>\n      </thead>\n      <tbody ref=\"csitable_tbody\">\n        <tr v-for=\"(row, index) in rows\" :key=\"index\">\n          <!-- row -->\n          <td\n            v-for=\"column in columns\"\n            :key=\"column.key\"\n            :style=\"{ 'text-align': column.align || 'left' }\"\n          >\n            <!-- slot (column.key) yang di custom (misalnya ditambahkan beberapa elemen) akan diletakkan disini -->\n            <slot\n              v-if=\"$scopedSlots[column.key]\"\n              :name=\"column.key || column.label\"\n              :row=\"row\"\n            ></slot>\n            <!-- ini adalah default default slot jika slot (column.key) tidak di custom -->\n            <span v-else>{{ row[column.key] }}</span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!--Pagination-->\n    <slot name=\"pagination\">\n      <b-card-footer class=\"py-4 d-flex justify-content-end\">\n        <base-pagination\n          v-model=\"page\"\n          :per-page=\"limit\"\n          :total=\"total\"\n          :page-count=\"totalPage\"\n          @change=\"setPage\"\n        ></base-pagination>\n      </b-card-footer>\n    </slot>\n  </div>\n</template>\n\n<script type=\"text/babel\">\n// import { Loading } from \"element-ui\";\nimport BasePagination from \"./BasePagination\";\nimport MyDatePicker from \"./MyDatePicker\";\n\nexport default {\n  name: \"CsiDataTable\",\n  inheritAttrs: false,\n  // inheritAttrs: false,\n  components: {\n    [BasePagination.name]: BasePagination,\n    MyDatePicker,\n  },\n  directives: {\n    loading: Loading,\n  },\n  props: {\n    /**\n     * Jumlah record maksimum yang akan ditampilkan pada tabel (default 10).\n     */\n    limit: {\n      type: Number,\n      default: 10,\n      description: \"Total data yang akan ditampilkan pada table (default 10)\",\n    },\n\n    /**\n     * Konfigurasi tabel jika ingin mengaktifkan fitur pencarian pada tabel.\n     */\n    enSearch: {\n      type: Boolean,\n      default: true,\n      description:\n        \"Konfigurasi tabel jika ingin mengaktifkan fitur pencarian pada tabel.\",\n    },\n\n    /**\n     * Konfigurasi tabel jika ingin mengaktifkan fitur filter tanggal\n     */\n    enDateFilter: {\n      type: Boolean,\n      default: false,\n      description:\n        \"Konfigurasi tabel jika ingin mengaktifkan fitur filter tanggal\",\n    },\n\n    /**\n     * Kumpulan data yang akan ditampilkan pada tabel.\n     */\n    columns: {\n      type: Array,\n      default: () => [],\n      description: \"Isian kolom yang akan ditampilkan pada table\",\n    },\n\n    /**\n     *  Fungsi yang dipanggil guna pengambilan data untuk tabel.\n     */\n    getData: {\n      type: Function,\n      default: () => Promise.resolve([]),\n    },\n\n    /**\n     * Fungsi yang akan dipanggil saat tabel akan dimuat ulang.\n     */\n    beforeReload: {\n      type: Function,\n      default: null,\n      description: \"Fungsi yang akan dipanggil saat tabel akan dimuat ulang\",\n    },\n\n    /**\n     * Fungsi yang dipanggil setelah tabel selesai dengan proses yang diperlukan.\n     */\n    loadComplete: {\n      type: Function,\n      default: null,\n      description:\n        \"Fungsi yang akan dipanggil saat tabel selesai memproses data\",\n    },\n  },\n  data() {\n    return {\n      page: 1,\n      search: null,\n      // total records row yang diterima.\n      total: 0,\n\n      // jumlah keseluruhan halaman yang dapat ditampilkan.\n      totalPage: 0,\n\n      loading: false,\n\n      // versi dari ui-table untuk sortOrder\n      sort: [],\n\n      // versi sortOrder untuk diberikan pada pengguna\n      // sebenarnya ini sama dengan @sort tetapi beda pada model nilai saja.\n      orderBy: { column: null, dir: \"asc\" },\n\n      // tempat untuk menyimpan sementara data sebelum teruskan ke tabel.\n      rows: [],\n\n      // jika fitur filter tanggal digunakan,\n      // seharusnya setiap element pada objek ini akan terisi.\n      dateRange: {\n        date_start: null,\n        date_end: null,\n      },\n\n      // sebagai pengingat kolom-kolom data yang\n      // digunakan sebagai inisialisasi pengurutan data.\n      defaultOrderableElement: (function (x) {\n        const orderable = x.find(\n          (value) => typeof value.key === \"string\" && value.sortable === true\n        );\n        return undefined !== orderable ? orderable.key : x[0].key;\n      })(this.columns),\n\n      // sebagai pengingat kolom-kolom\n      // data yang digunakan sebagai pencarian.\n      searchableElement: (function (x) {\n        const elements = [];\n        for (let i = 0; i < x.length; i++) {\n          const def = x[i];\n          if (def && true === def.searchable) elements.push(def.prop);\n        }\n\n        return elements;\n      })(this.columns),\n    };\n  },\n  computed: {\n    listeners() {\n      return {\n        ...this.$listeners,\n        [\"sort-change\"]: this.onSortChange,\n      };\n    },\n  },\n  methods: {\n    rangeChanged(/*val*/) {\n      // console.log(this.dateRange);\n      // console.log([val, this.date_end]);\n      // console.log(this.dateRange);\n    },\n\n    getSortOrder() {\n      let sortOrder = {};\n      const sort = this.sort,\n        columns = this.columns;\n\n      if (sort.length !== 0) {\n        const order = sort[0].split(\"|\");\n        sortOrder = { column: order[0], dir: order[1] };\n      } else if (columns.length !== 0) {\n        sortOrder = { column: this.defaultOrderableElement, dir: \"asc\" };\n      }\n\n      return sortOrder;\n    },\n\n    fixingTextAlign(targetClassName, className) {\n      const trth = document.getElementsByClassName(targetClassName);\n      if (trth === null) return;\n\n      for (let i = 0; i < trth.length; i++) {\n        const thTdCenteredText = trth[i];\n        if (0 !== thTdCenteredText.children.length) {\n          thTdCenteredText.children[0].classList.add(className);\n          break;\n        }\n      }\n    },\n\n    createParams() {\n      this.orderBy = this.getSortOrder();\n\n      const readOnlyParams = {};\n      this.oReadOnly(readOnlyParams, \"page\", this.page);\n      this.oReadOnly(readOnlyParams, \"limit\", this.limit);\n\n      if (this.orderBy.column === null)\n        this.orderBy.column = this.defaultOrderableElement;\n      this.oReadOnly(readOnlyParams, \"order\", this.orderBy);\n\n      if (this.enSearch)\n        this.oReadOnly(readOnlyParams, \"search\", this.search || null);\n\n      if (this.enDateFilter)\n        this.oReadOnly(readOnlyParams, \"dateRange\", this.dateRange);\n\n      return readOnlyParams;\n    },\n\n    resetPageState() {\n      this.page = 1;\n      this.total = 0;\n      this.totalPage = 0;\n      this.total = 0;\n    },\n\n    async getTableData(page, search, sortParams) {\n      if (this.loading) return;\n\n      this.loading = true;\n\n      this.search = search || null;\n      this.page = page || this.page;\n      this.sort = sortParams || this.sort;\n\n      const params = this.createParams();\n      if (typeof this.beforeReload === \"function\")\n        this.beforeReload.apply(null, []);\n\n      try {\n        const response = await this.getData(params);\n        this.rows = response.data || [];\n        this.totalPage = response.total || 0;\n        this.total = response.records || 0;\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this.loading = false;\n        this.fixingTextAlign(\"is-center\", \"fix-column-centered\");\n        this.fixingTextAlign(\"is-left\", \"fix-column-left\");\n\n        if (typeof this.loadComplete === \"function\")\n          this.loadComplete.apply(null, []);\n      }\n    },\n\n    setPage(page) {\n      if (this.loading) return;\n\n      this.page = page || this.page;\n      this.getTableData(this.page, this.search, this.sort);\n    },\n\n    onSortChange({ /*column,*/ prop, ev }) {\n      if (this.loading) return;\n\n      let order = ev.target.getAttribute(\"aria-sort\");\n      if (!order) return;\n\n      if (order === \"none\") order = \"ascending\";\n      else if (order === \"ascending\") order = \"descending\";\n      else order = \"ascending\";\n\n      this.sort =\n        prop !== null\n          ? [`${prop}|${order === \"ascending\" ? \"asc\" : \"desc\"}`]\n          : [];\n      this.getTableData(this.page, this.search, this.sort).then(() => {\n        ev.target.setAttribute(\"aria-sort\", order);\n      });\n    },\n\n    handleTableSearch() {\n      if (this.enSearch && !this.loading)\n        this.getTableData(this.page, this.search, this.sort);\n    },\n\n    refreshTable() {\n      if (!this.loading) this.getTableData(this.page, this.search, this.sort);\n    },\n  },\n  created() {\n    this.getTableData();\n  },\n};\n</script>\n\n<style>\n.table td,\n.table th {\n  white-space: revert;\n}\n\n.el-table.table-dark th,\n.el-table.table-dark tr {\n  background-color: #172b4d;\n}\n\n.el-table.table-dark td,\n.el-table.table-dark th.is-leaf {\n  border-bottom: none;\n}\n</style>\n"]}]}